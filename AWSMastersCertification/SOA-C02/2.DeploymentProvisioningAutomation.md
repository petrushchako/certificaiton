# CHAPTER 2<br>**Deployment, Provisioning, and Automation**

### Chapter outline
- Section Introduction
- `Demo` Deploying an Elastic Compute Cloud (EC2) Instance
- `HANDS-ON LAB` Create and Secure an EC2 Instance
- Understanding EBS Volumes
- What Is a Bastion Host?
- Exploring Elastic Load Balancer
- Understanding Elastic Load Balancer Error Messages
- `Demo` Deploying an Elastic Load Balancer
- `Demo` Understanding Elastic Load Balancer CloudWatch Metrics
- `Demo` Working with Elastic Load Balancer Access Logs
- Understanding Sticky Sessions
- Load Balancing Based on an IP Address
- Discovering EC2 Image Builder
- `Demo` Creating an AMI Using EC2 Image Builder
- Introducing CloudFormation
- `Demo` Provisioning AWS Resources Using CloudFormation
- `HANDS-ON LAB` Deploying an EC2 Instance with CloudFormation
- Troubleshooting CloudFormation
- `Demo` CloudFormation Errors
- Introducing CloudFormation StackSets
- CloudFormation Best Practices
- Exploring Blue/Green Deployments
- Understanding Rolling Deployments
- When to Use Canary Deployments
- Automating Tasks Using AWS Systems Manager
- `Demo` Implementing Automated Patching Using AWS Systems Manager
- `Demo` Using AWS Systems Manager EC2 Run Command
- Section Review: Deployment, Provisioning, and Automation Summary - Part 1
- Section Review: Deployment, Provisioning, and Automation Summary - Part 2



<br><br>

## `Demo` Deploying an Elastic Compute Cloud (EC2) Instance

1. Launch an EC2 Instance
    - Explore the options available.
    - Configure the security group to allow HTTP traffic.
2. Use a Bootstrap Script
    - Install http and create /var/www/index.html.
    - Navigate to Advanced Option, and enter the following bootsrap script below:

        ```sh
        #!bin/bash
        dnf update -y
        dnf install httpd -y
        echo "<html><body><h1>Hello Cloud Gurus</h1></body></html>" > /var/www/html/index.html
        systemctl start httpd
        systemctl enable httpd
        ```
3. Test Our Website
    - Access the website using the public IP address.
      - Open `EC2>Instances>Instances`
      - Check box of created instance and view details
      - Copy Public IP and access resource in browser.


<br><br>

## Understanding EBS Volumes

### What Is EBS?
- Storage volumes that you can attach to your EC2 instance.
- When you create EC2 instance, it has at least one EBS volume attached, and that is where your OS gets installed.<br>You can add more volumes
- You can use EBS the same way you would use any system disk:
  - Create a file system
  - Run a database
  - Run an operating system
  - Store data
  - Install applications

<br>

### EBS Features
- **Mission Critical**
  1. **Production workloads**<br>Designed for mission critical worloads.
  2. **High Availability**<br>Automatically replicated within a single Availability Zone to protect against hardware failures.
  3. **Scalable**<br>Dynamically increase capacity and change the type volume with no downtime or performance impact to your live system. 

<br>

### EBS Volume Types - Solid State Disk
- **General Purpose SSD `gp2`**
  - A balance of price and performance.
  - 3 IOP per GiB, up to a maximum of 16,000 IOPS per volume.
  - gp2 volumes smaller than 1TB can burst up to 3,000 IOPS.
  - Good for boot volumes or development and test applications which are not latency sensitive.

<br>

- **General Purpose SSD `gp3`**
  - Baseline of 3,000 IOPS for **any volume size** (1GB - 16TB)
  - Delivering up to 16,000 IOPS
  - 20% cheaper than `gp2`
  - Like `gp2`, they are good for boot volumes or development and test applications which are not latency sensistive.

<br>

- **Provisioned IOPS SSD `io1`**
  - The high performance option, and the most expensive.
  - Up to 64,000 IOPS per volume. 50 IOPS per GiB.
  - Use if you need more than 16,000 IOPS.
  - Designed for I/O intensive applications, large databases, and latency-sensitive workloads.

<br>

- **Provisioned IOPS SSD `io2`**
  - Latest generation.
  - Higher durability and more IOPS.
  - Similar to `io1` it is up to the same maximum of 64,000 IOPS per volume.
  - `io2` is the same prive as `io1`.
  - `io2` is more durable and more performant.
  - Up to 64,000 IOPS per volume. 500 IOPS per GiB (10x more than `io1`)
  - `io2` offers 99.999% durability instead of up to 99.8-99.9% offered by all other EBS solutions.
  - I/O intensive apps, large databases, and latency-sensitive workloads. Applications which need high levels of durability.

<br>

- **Provisioned IOPS SSD `io2 Block Express`**
  - Relatively new offering from AWS.
  - SAN (Storage Area Network) in the cloud.
  - Highest performance, sub-millisecond latency.
  - Uses EBS Block Express architecture.
  - 4x throughput IOPS and capacity of regular `io2` volumes.
  - Up to 64TB, 256,000 IOPS per volume.
  - 99.999% durability.
  - Great for the largest, most critical, high-performance applications like **SAP HANA**, **Oracle**, **Microsoft SQL Server** and **IBM DB2**.

<br>
