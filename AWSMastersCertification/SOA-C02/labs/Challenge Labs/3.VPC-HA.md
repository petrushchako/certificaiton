# Create a Highly Available VPC

![](../../img/ChallengeLab-3.png)

<br>

### ABOUT THIS LAB
In this lab, you will create a highly available VPC. Then, you will configure the route table, create a security group, and enable logging to S3.

<br>

### Objectives
- Create a Highly Available VPC
- Configure a Route Table within Your VPC Named PubRT
- Create the PublicSG and PrivateSG Security Groups
- Enable Logging of All IP Traffic to a Created S3 Bucket

<br>

## Solution
## Create a Highly Available VPC
### Create the VPC
1. Navigate to `VPC` using the Services menu or the unified search bar.
2. In the sidebar menu, select `Your VPCs`.
3. On the right, click `Create VPC`.
4. Configure the VPC settings section:
       - **Resources to create**: Select VPC only.
       - **Name tag**: In the text box, enter LabVPC.
       - **IPv4 CIDR**: In the text box, enter `10.20.0.0/16`.
5. Leave all the other default settings and click `Create VPC`.<br>The VPC is created and its details are automatically displayed.

<br>

### Create the Subnets
1. In the sidebar menu, select `Subnets`.
2. On the right, click `Create subnet`.
3. In the VPC ID field, use the dropdown to select your VPC.
4. Configure the Subnet settings section for public subnet 1:
    - **Subnet name**: In the text box, enter `Public1`.
    - **Availability Zone**: Use the dropdown to select `US East (N.Virginia)/us-east-1a`.
    - **IPv4 CIDR block**: In the text box, enter `10.20.1.0/24`.
5. Toward the bottom of the page, click Add new subnet.
6. Configure the Subnet settings section for public subnet 2:
    - **Subnet name**: In the text box, enter `Public2`.
    - **Availability Zone**: Use the dropdown to select `US East (N. Virginia)/us-east-1b`.
    - **IPv4 CIDR block**: In the text box, enter `10.20.2.0/24`.
7. Toward the bottom of the page, click Add new subnet again.
8. Configure the Subnet settings section for private subnet 1:
    - **Subnet name**: In the text box, enter `Private1`.
    - **Availability Zone**: Use the dropdown to select `US East (N. Virginia)/us-east-1a`.
    - **IPv4 CIDR block**: In the text box, enter `10.20.3.0/24`.
9.Toward the bottom of the page, click Add new subnet one more time.
10. Configure the Subnet settings section for private subnet 2:
    - **Subnet name**: In the text box, enter `Private2`.
    - **Availability Zone**: Use the dropdown to select `US East (N. Virginia)/us-east-1b`.
    - **IPv4 CIDR block**: In the text box, enter `10.20.4.0/24`.
11. At the bottom of the page, click `Create subnet`.<br>The four subnets take a moment to finish creating.

<br>

### Build an Internet Gateway
1. In the sidebar menu, select `Internet gateways`.
2. On the right, click `Create internet gateway`.
3. In the Name tag field, enter `LabIGW`.
4. Click `Create internet gateway`.<br>The internet gateway takes a moment to finish building.
5. After the internet gateway is created, use the breadcrumb along the top of the page to select `Internet gateways`.
6. Check the checkbox to the left of your `LabIGW` gateway.
7. On the right, use the `Actions` dropdown to select `Attach to VPC`.
8. In the **Available VPCs** field, click into the text box and select your `LabVPC` VPC.
9. Click `Attach internet gateway`.<br>The internet gateway is attached to your VPC.

<br>

## Configure a Route Table within Your VPC Named PubRT
### Create the Route Table and Associate the Public Subnets
1. In the sidebar menu, select `Route tables`.
2. In the top right corner, click `Create route table`.
3. Configure the Route table settings section:
    - **Name**: In the text box, enter `PubRT`.
    - **VPC**: Use the dropdown to select your `LabVPC` VPC.
4. Click `Create route table`.<br>The route table is created and its details display automatically.
5. On the right, use the `Actions` dropdown to select `Edit subnet associations`.
6. Check the checkboxes to the left of the `Public1` and `Public2` subnets.
7. Click `Save associations`.
