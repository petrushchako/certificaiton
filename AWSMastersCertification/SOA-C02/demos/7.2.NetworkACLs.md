# Demo:<br>Configuring Network ACLs

<br>

![](../img/demo/7.2.NetworkACLs.png)

<br>

### Objectives
1. **Review Our Default VPC**<br>A default network ACL is automatically created for you
2. **Launch an EC2 Instance**<br>Configure it as a web server
3. **Create Our Own NACL**<br>Configure it to allow HTTPS and SSH access
4. **Deny Based on IP Address**<br>Configure the NACL to deny access from our IP address

<br><br><br>

## Solution - Part 1
#### 1. **Review Our Default VPC**
   1. Open the **AWS Management Console** and search for **VPC**.
   2. Navigate to **Your VPCs** and locate the **Default VPC**.
   3. In the left-hand menu, under **Security**, select **Network ACLs**.
   4. Review the **default network ACL**:
      - **Inbound Rules**:
        - Allows all traffic (all protocols, ports, and sources).
      - **Outbound Rules**:
        - Allows all traffic (all protocols, ports, and destinations).
   5. Check **Subnet Associations**:
      - The default network ACL is associated with all subnets in the default VPC.

<br>

#### 2. **Launch an EC2 Instance**
   1. In the AWS Console, search for **EC2** and select **Launch Instance**.
   2. Configure the instance:
      - **Name**: `MyWebServer`
      - **AMI**: Amazon Linux 2
      - **Instance Type**: `t3.micro`
      - **Key Pair**: Create a new key pair for SSH access.
      - **Network Settings**:
        - Select the **Default VPC**.
        - Choose a subnet in the `us-east-1a` Availability Zone.
        - Ensure **Auto-assign Public IP** is enabled.
      - **Security Group**:
        - Create a new group named `MyWebDMZ`.
        - Add the following rules:
          - **SSH**: Protocol TCP, Port 22, Source Anywhere (`0.0.0.0/0`).
          - **HTTP**: Protocol TCP, Port 80, Source Anywhere (`0.0.0.0/0`).
   3. Launch the instance and wait for it to initialize.

<br>

#### 3. **Connect to the EC2 Instance**
   1. Once the instance is running, select it and click **Connect**.
   2. Use **EC2 Instance Connect** for an SSH session.
   3. Run the following commands:
      - Switch to the root user:
        ```bash
        sudo su
        ```
      - Update the operating system:
        ```bash
        yum update -y
        ```
      - Install the HTTP server:
        ```bash
        yum install httpd -y
        ```
      - Navigate to the web server's root directory:
        ```bash
        cd /var/www/html
        ```
      - Create a simple HTML file:
        ```bash
        echo "<html><h1>Welcome to MyWebServer</h1></html>" > index.html
        ```
      - Start the HTTP server:
        ```bash
        systemctl start httpd
        ```
      - Enable the HTTP server to start on boot:
        ```bash
        systemctl enable httpd
        ```

<br>

#### 4. **Test the Web Server**
   1. Copy the **Public IP Address** of your EC2 instance from the AWS Console.
   2. Open a web browser and navigate to the IP address.
   3. Verify that the webpage displays:  
      `Welcome to MyWebServer`.
