# Demo:<br>Creating custom IAM policies and roles

![](../img/6.1.LabDiagram.png)

<br>

### Objectives
1. Create and AIM policy for S3 access
2. Create an IAM role for an EC2 instance
3. Create an EC2 instance using the created role
4. Test the IAM roles/policies using the AWS CLI

<br>

## Solution  
### Step 1: Create an IAM Policy for S3 Access  
1. Open the **IAM** console and select **Policies** from the left-hand menu.  
2. Click **Create Policy** and choose the **Visual Editor**.  
3. Choose the **S3** service.  
   - Under **Actions**, select:  
     - **List**: All List Actions.  
     - **Read**: All Read Actions.  
4. For the resource, grant access to **All Resources** for this demo.  
5. Skip **Request Conditions** and proceed to review.  
6. Name the policy as **My S3 List Read Policy**, add a description, and click **Create Policy**.  
7. Verify the policy by locating it in the policies list and reviewing the auto-generated JSON.  

<br>

### Step 2: Create an IAM Role for EC2  
1. From the **IAM** console, select **Roles** in the left-hand menu.  
2. Click **Create Role** and choose **AWS Service** as the trusted entity.  
3. Under **Use Cases**, select **EC2** and click **Next**.  
4. Attach the previously created policy (**My S3 List Read Policy**) and proceed.  
5. Name the role as **My S3 List Read Role** and click **Create Role**.  

<br>
