# Demo:<br>Working with Athena


![](../img/demo/4.5.Athena.png)

<br>

### Objectives
1. **Configure a Trail in `CloudTrail`**<br>CloudTrail will generate an audit log of all activity on our account
2. **`CloudTrail` Sends Logs to `S3`**<br>Our trail will store the logs it creates in a new S3 bucket
3. **Create an `Athena Table`**<br>Use standard SQL to query the data stored in the S3 bucket

<br>

## Solution
### **Configure a Trail in CloudTrail**
1. Navigate to `CloudTrail` in AWS console and select `Dashboard`
2. Select `Create trail` and provide following details:
   - **Step 1<br>Choose trail attributes** 
   - Name: `management-events` 
   - Storage location: `Create new S3 bucket`
   - Log file SSE-KMS encryption: `Enabled`
   - Customer managed AWS KMS key: `New`
   - AWS KMS alias: `mykmskey`
   - Log file validation: `Enabled`
   - `Next`
   - **Step 2<br>Choose log events**
   - Event type:
     - [x] Management events
     - [ ] Data events
     - [ ] Insights events
   - API activity:
     - [x] Read
     - [x] Write
     - [ ] Exclude AWS KMS events
     - [ ] Exlude AMAZON RDS Data API events
   - `Next`
   - Review and create trail by selecting `Create trail`

    > In few minutes new log files will start appearing in new S3 bucket created for Trail


