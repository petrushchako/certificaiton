# Demo:<br>Route 53 Geolocation Routing Policy

<br>

### Objectives
- **Launch Two EC2 Instances**<br>Install `httpd`
- **Configure a Routing Policy**<br>Create a A record using a geolocation routing policy
- **Test**<br>Test that everything is working and requests are being routed to the correct region

<br>

## Solution
### Lecture Notes: Configuring a Route 53 Geolocation Routing Policy

---

#### **Lesson Objectives:**
1. Launch and configure two EC2 instances for the demonstration.
2. Set up and install **httpd** on the instances to display custom webpages.
3. Create an A record in Route 53 with a **geolocation-based routing policy**.
4. Test geolocation routing functionality by simulating user traffic from different locations.

<br>

#### **Launching EC2 Instances**
- Go to the AWS Management Console, search for **EC2**, and create two instances:
  1. **Instance WS1**:
     - Name: WS1.
     - AMI: Amazon Linux.
     - Instance Type: `t3.micro`.
     - Security Group: Configure to allow HTTP traffic on port 80.
     - User Data: Add a bootstrap script to install and configure a website that displays a message:
       > *"This version of the website is for customers located in [UK or your country]."*
  2. **Instance WS2**:
     - Name: WS2.
     - Similar configuration as WS1.
     - Modify the user data to display a message:
       > *"This version of the website is for customers located in [a different country, e.g., Barbados]."*

<br>

#### **Configure Route 53 Geolocation Routing**
1. **Access Route 53**:
   - Open the **Hosted Zone** for your domain.
   - Clear any existing A records, leaving the **NS** and **SOA** records.

2. **Create A Records**:
   - Record 1:
     - **Record Name**: Leave blank.
     - **Record Type**: A.
     - **Value**: Public IP address of **WS1**.
     - **Routing Policy**: Geolocation.
     - **Location**: Select your current country (e.g., UK).
     - **Record ID**: 1.
   - Record 2:
     - **Record Name**: Leave blank.
     - **Record Type**: A.
     - **Value**: Public IP address of **WS2**.
     - **Routing Policy**: Geolocation.
     - **Location**: Select another country (e.g., Barbados).
     - **Record ID**: 2.

3. **Default Record**:
   - Add a third record to handle requests from users outside the specified countries:
     - **Record Type**: A.
     - **Value**: Public IP of WS2 (or another server).
     - **Routing Policy**: Geolocation.
     - **Location**: Default.
     - **Record ID**: 3.

<br>