# Exam TIPS<br>**Storage and Data Management

## S3 101
- **Object-based**<br>Object-based allows you to upload files
- **Not OS or DB Storage**<br>Not suitable to install an operating system or run a database on
- **Files Up to 5 TB**<br>Files can be from 0 bytes to 5 TB
- **Unlimeted Storage**<br>The total volumes of data and the number of objects you can store is unlimited

<br>

- Files Stored in buckets
- S3 is a universal namespace and all names have to be globaly unique
- Sample bucket URL: `https://<bucket_name>.s3.<region>.amazonaws.com/<key_name>`
  
<br><br><br>

## S3 Storage Classes
|Storage Class|Availability andDurability|AZ|Use Case|
|---|---|---|---|
|**S3 Standard**|99.99% Availability<br>11 9's Durability|>=3|Suitable for most workloads (e.g., websites, content distribution, mobile and gaming applications, and big data analytics)|
|**S3 Standard-Infrequent Access**|9.99% Availability<br>11 9's Durability|>=3|Long-term, infrequently accessed critical data (e.g., backups, data store for disaster recovery files, etc.). Minimum storage duration: 30|
|**S3 One Zone-Standard Access**|99.5% Availability<br>11 9's Durability|1|Long-term, infrequently accessed, non-critical data. Minimum storage duration: 30 days|
|**S3 Glacier Instant Retrieval**|99.9% Availability<br>11 9's Durability|>=3|Long-lived data, accessed approximately once per quarter with millisecond retrieval time. Minimum storage duration: 90 days|
|**S3 Glacier Flexible Retrieval**|99.99% Availability<br>11 9's Durability|>=3|Long-term data archiving that occasionally needs to be accessed within a few hours or minutes. Retrieval options of 1 minute to 12 hours. Minimum storage duration: 90 days|
|**S3 Glacier Deep Archive**|99.99% Availability<br>11 9's Durability|>=3|Rarely accessed data archiving with default retrieval time of 12 hours (e.g., financial records for regulatory purposes). Minimum storage duration: 180 davs|


<br><br><br>

## S3 Lifecycle Policy
- **Cost Effective**<br>Ensure you are using the most cost-effective option to store your objects in S3.
- **Creation Date**<br>
Lifecycle rules are based on object creation date.
- **Transition**<br>
Transition your objects to Infrequently Accessed Storage or to Glacier based on the rules you configure.
- **Housekeeping**<br>
You can also set an expiry date for objects you want S3 to delete after a certain time period has elapsed.

<br><br><br>

## Creating an S3 Bucket
- S3 buckets and objects do not allow public access
- If we want to enable public access, we need to explicitly configure it (disable block public access on the bucket and configure bucket policy allowing annonymous read)
- Use S3 to store any file type you can think of, e.g. photos, videos, code, documents and text files


<br><br><br>

## S3 Versioning Exam Tips
1. **Mutiple Versions**<br>Multiple versions of an object are stored in the same bucket
2. **DELETE Request**<br>Doesn't delete the objectm but applies a delete marker instead
3. **Protects Agains Accidental Deletion**<br>You can still access all the previous versions of the file by specifying their versions ID in the GET request


<br><br><br>

## S3 MFA Deletion
- `arn:aws:iam::123456789:mda/root-ccount-mfa-device 123456`
- **MFA Delete**<br>A valid code from your MFA device is required to permanently delete an S3 object
- **S3 Versioning**<br>A valid code from your MFA device is required to suspend(or reactivate) S3 versioning
- **Protect Your Data...**<br>...against accidental or malicious deletions of your version-controlled S3 buckets.


<br><br><br>

## S3 Encryption
- **Encryption in Transit**
  - SSL/TLS
  - HTTPS
- **Server-Side Encryption at Rest:**
  - SSE-S3 (AES 256-bit)
  - SSE-KMS
  - SSE-C
- **Client-Side Encryption**
  - You encrypt the files yourself before you upload them into S3

> **SSE-S3** enabled by default

<br><br><br>


## Introduction to Elastic File System (EFS)
### What is EFS?
1. **Managed Network File System**<br>Highly available and scalable
2. **Standard NFS Protocol**<br>Used by Linux systems. EFS is for Linux-based workloads only
3. **Multiple EC2 Instances Can Access**<br>Multiple instnaces can access the file system at once. Great for applications which need to access shared files, e.g. a shared configuration file or state information.<br>**You cannot do this with EBS**
4. **Kifecycle Management**<br>Any files in your file system that are not accessed for a period of time will automatically move to the EFS Infrequent Access (EFS IA) storage class.
5. **Encryption**<br>You can configure encryption at rest and in transit

<br>

### EFS Example Scenario 
![](img/4.2.EFS-Example.png)

<br>

### Enabling Encryption at Rest
If you enable encryption for your file system, all data on your file system will be encrypted at rest. You can select a KMS key from your account to protect your file system, or you can provide the ARN of a key from a different account.<br>**Encryption of data at rest can only be enabled during file system creation**.<br>Encryption of data in transit is configured when mounting your file system.<br>
If you decide to encrypt your EFS later on, you will have to create new EFS and migrate files.

<br>

## EFS Storage Classes

||Use Case|Durability|Availability|AZs|Considerations|
|---|---|---|---|---|---|
|**EFS Standard**|Frequently accessed data, needs highest availability|11 9's|99.99%|>=3|N/A|
|**EFS Standard-Infrequent Access(IA)**|Infrequently accessed data, needs highest availability|11 9's|99.99%|>=3|Per GB retrieval fees|
|**EFS One Zone**|Frequently accessed data, doesn't require highest availability|11 9's|99.9%|1|Not resilient to the loss of AZ|
|**EFS One Zone-IA**|Infrequent access data, doesn't require highest availability|11 9's|99.9%|1|Not resilient to the loss of AZ Per GB retrieval fees|