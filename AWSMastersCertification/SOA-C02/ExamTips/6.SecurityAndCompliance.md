# Exam TIPS<br>Security and Compliance

<br>

## Compliance on AWS
- Familiarize with compliance frameworks like **ISO 27001, HIPAA, PCI DSS**, and **FedRAMP**.
- Understand the **Shared Responsibility Model** and AWS GovCloud's role in federal compliance. The initiative which empowers the federal government to obtain objectives through innovation and cloud computing.
- Be aware of specific AWS tools (e.g., CloudTrail, CloudWatch) that assist in compliance tasks such as monitoring and auditing.

<br><br><br>

## Understanding Distributed Denial of Service (DDoS)
- Key services to remember for DDoS mitigation:
  - **Amazon CloudFront, Route 53, CloudWatch, AWS WAF, AWS Shield, Elastic Load Balancing, AWS Auto Scaling**
- **Additional Resource**: Review the ![AWS DDoS White Paper](https://docs.aws.amazon.com/pdfs/whitepapers/latest/aws-best-practices-ddos-resiliency/aws-best-practices-ddos-resiliency.pdf) for in-depth strategies on mitigating DDoS attacks in AWS architectures.

<br><br><br>

## AWS Marketplace Security Products
- **Key Exam Tip**: Understand that purchasing a third-party security tool from AWS Marketplace can enhance the security of an AWS architecture.
- **Remember**: For questions about introducing additional security, consider AWS Marketplace as an option for sourcing third-party security solutions.

<br><br><br>

## IAM Refresh
- **Key Concepts**:
  - Understand IAM basics: users, groups, and roles, and how they grant access.
  - Recognize that IAM provides centralized control over an AWS account.
  - Be aware of IAM features like Identity Federation, MFA, temporary access, password policies, integration, and compliance.

<br><br><br>

## MFA
- **Multifactor Authentication (MFA):**  
  - Adds a second layer of security for AWS accounts.  
  - Can be enabled for both root and IAM user accounts.  
  - Works with both the AWS console and CLI.  

- **Credential Report:**  
  - Lists all IAM users in the account.  
  - Includes details like password age, access key age, and MFA status.  
  - Useful for auditing and ensuring compliance with security best practices.  

<br><br><br>


## Introducing IAM Identity Center
- **Federated Identity:**  
  - Authentication across multiple systems using a single identity.  

- **IAM Identity Center (formerly AWS SSO):**  
  - Centrally manages identity federation and SSO in AWS.  

- **Active Directory Integration:**  
  - **AD Connector:** Simplifies integration with on-premises AD.  
  - **AD Trust Relationship:** Configures trust between on-premises AD and AWS Directory Service.  

<br><br><br>


## Auditing and Troubleshooting Access Issues
- **CloudTrail:**  
  - Logs API activity and stores events in S3 or CloudWatch Logs.  
  - Use with Athena for advanced querying.  

- **IAM Access Analyzer:**  
  - Identifies externally shared resources.  
  - Key services include S3, Lambda, IAM roles, and Secrets Manager.  

- **IAM Policy Simulator:**  
  - Simulates and troubleshoots IAM policies for users, groups, and roles.  
  - Test conditions like IP restrictions, dates, and actions before applying.  

<br><br><br>


## AWS Inspector vs Advisor
- **AWS Inspector**: Think **EC2 security** and network vulnerabilities.  
- **AWS Trusted Advisor**: Broad **optimization recommendations** across **many AWS services**.  
  - **Security checks**: Public snapshots, S3 permissions, MFA on root, etc.  
  - **Cost-saving tips**: Idle resources or optimization opportunities.  
  - **Fault tolerance**: Multi-AZ, backups, health checks.  

<br><br><br>


## Introducing AWS Organizations
- **Think AWS Organizations** when you see:  
  - **Centralized management** of multiple AWS accounts.  

**Key Features**:
- **Centrally Manage** policies across multiple AWS accounts
- **Control Access** to AWS services
- **Automate** account creation and management
- **Consolidate** billing across multiple AWS accounts    

<br><br><br>


## Service Control Policies
1. **Allow List:**
   - All services/actions denied by default.
   - Specify the allowed services and actions explicitly.
2. **Deny List:**
   - All services/actions allowed by default.
   - Specify the denied services and actions explicitly.
3. **Purpose:**
   - SCPs are used to control and manage access to AWS services.
   - Default strategy is deny list, but allow lists are also supported.
4. **Hierarchy:**
   - SCPs apply to OUs and their child accounts.
   - SCP inheritance must be understood to avoid access issues.

<br><br><br>


## Securing Multiple Accounts with AWS Control Tower and Organizations  
- **Control Tower Overview**: Automates account management, policy application, and guardrails via AWS Organizations.  
- **Landing Zones**: Framework for multi-account architecture with pre-configured security and network baselines.  
- **Account Factory**: Standardized account template to streamline provisioning.  
- **Guardrails**:  
  - Preventative: Always compliant, enforced by SCPs.  
  - Detective: Identifies compliance issues and flags them.  

<br><br><br>



## Security Token Service (STS)
1. **STS is for temporary credentials**:
   - Used in identity federation, web identity federation, cross-account access, and roles for EC2.
2. **Key STS Components**:
   - **Access Key ID, Secret Access Key, Session Token**.
3. **Federation Types**:
   - Enterprise (SAML-based) and Web Identity (OpenID-based with Google, Facebook, etc.).
4. **Cross-Account Roles**:
   - STS is integral to granting temporary access across accounts.
5. **IAM Roles Integration**:
   - EC2 and Lambda use STS tokens to access AWS services securely.

<br>

AWS STS bridges the gap between secure, short-term access and dynamic, scalable workflows—ideal for modern applications and cross-account operations!

<br><br><br>


## AWS Key Management Service (KMS)
## Overview
- **AWS KMS**: Fully managed service for creating, storing, and managing cryptographic keys.
- **Purpose**:
  - Centralized management of encryption keys.
  - Simplifies encryption through AWS service integration.
  - Logs key usage via **AWS CloudTrail** for compliance and auditing.

<br>

### Customer Master Key (CMK)
- **Definition**: Logical representation of a master key holding cryptographic material.
- **Key Facts**:
  - Can encrypt **up to 4 KB** of data directly.
  - Used to generate, encrypt, and decrypt **data keys**.
  - **CMKs cannot be exported** — they always reside within KMS.

### CMK Components
1. **Alias**: Human-readable name for the key (e.g., `S3-CMK`).
2. **Creation Date**: Timestamp when the CMK was created.
3. **Description**: Optional description of the CMK.
4. **Key State**: Status of the CMK:
   - Enabled, Disabled, Pending Deletion, or Unavailable.
5. **Key Material**:
   - **AWS-Provided**: Managed by AWS.
   - **Customer-Provided**: Imported by the user via **CloudHSM**.

<br>

### Types of Keys in KMS
1. **AWS-Managed Keys**:
   - Created and managed automatically by AWS for services integrated with KMS.
2. **Customer-Managed Keys**:
   - Created and managed by customers.
   - Provides more control (e.g., manual key rotation, access policies).

<br>

### Accessing KMS
#### Methods
- **AWS Console**: User-friendly interface for managing keys.
- **AWS CLI**: Programmatic interaction with KMS via commands.

<br>

### CLI Commands
1. **Encrypt Data**<br>Encrypt plain text into ciphertext using CMK:
   ```bash
   aws kms encrypt
   ```
2. **Decrypt Data**<br>Decrypts ciphertext encrypted by CMK:
   ```bash
   aws kms decrypt
   ```
3. **Re-Encrypt**<br>Decrypts ciphertext and re-encrypts using a different CMK:
   ```bash
   aws kms re-encrypt
   ```
4. **Enable Key Rotation**<br>Enables automatic key rotation every 365 days:
   ```bash
   aws key enable-key-rotation
   ```
<br>

### AWS Services Integrated with KMS
KMS integrates with several AWS services for data encryption at rest:
    - EBS
    - S3
    - CloudTrail
    - DynamoDB
    - EFS
    - RDS
    - AWS Backups
    - AWS Lambda
#### Use Cases
- Encrypt snapshots for RDS, EBS, and other storage services.
- Secure backups and sensitive logs.
- Simplify encryption using CMKs in services like S3 and CloudTrail.

<br><br><br>


## 